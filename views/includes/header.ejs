<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<script src='https://kit.fontawesome.com/a076d05399.js' crossorigin='anonymous'></script>
<header>
  <div class="logo" id="logo"><img src="/img/global/logohealth.png" alt=""></div>

  <div class="date-time">
    <p> <i class='far fa-clock' style='font-size:24px'></i> <span id="time"></span></p>
    <hr class="lining">
    <p><i class='far fa-calendar-alt' style='font-size:24px'></i> <span id="date"></span></p>
  </div>
  <div class="profile1">
    <img src="/icon/notif.svg" alt="Notification" class="notif" onclick="notifDropdown()" />
    <div id="notif-drop" class="notification-drop">
      <div class="notif-head">
        <h3>Notifications</h3>
        <div class="circle">3</div>
      </div>
      <hr>
      <div class="notif-separate">
        <div class="notif-center">
          <img class="icon-p" src="/icon/profile.svg" alt="">
        </div>
        <div>
          <p class="p-head">
            Doctor Adriane Garcia
          </p>
          <p class="p-body">
            Send a laboratory request for patient Emma Silvero.
          </p>
        </div>

      </div>
      <div class="notif-separate">
        <div class="notif-center">
          <img class="icon-p" src="/icon/profile.svg" alt="">
        </div>
        <div>
          <p class="p-head">
            Nurse Eugene Gerna
          </p>
          <p class="p-body">
            Sends a new patient.
          </p>
        </div>

      </div>
      <div class="notif-separate">
        <div class="notif-center">
          <img class="icon-p" src="/icon/profile.svg" alt="">
        </div>
        <div>
          <p class="p-head">
            Medtech Joel Carpio
          </p>
          <p class="p-body">
            Sends laboratory results to doctor Garcia.
          </p>
        </div>

      </div>
      <div class="see-all">
        <a href="">See all</a>
      </div>
    </div>

    <img src="/icon/profile.svg" alt="Profile" class="icon" id="icon-pg" onclick="toggleDropdown()" />
    <div id="log-drop" class="logout-drop">
      <div class="sectors">
        <div class="iconing">
          <img class="sub-icon" src="/icon/profile.svg" alt="">
        </div>
        <div class="sheesh">
          <p>
            <%= firstname %>
              <%= surname %>
          </p>
          <p class="userT">
            <%= profession %>
          </p>
        </div>
      </div>
      <hr>
      <form action="/logout?_method=DELETE" method="POST">
        <button id="log-butt" type="submit"><i class="fa fa-sign-out-alt"></i>Log-out</button>
      </form>
    </div>
  </div>

</header>
<div class="overlay"></div>
<script src="../js/global/logout.js"></script>
<script src="../js/global/notif.js"></script>
<script src="../js/global/time.js"></script>
<link rel="stylesheet" href="../css/global/general.css">

<!-- <script>
      document.querySelectorAll(' .date-button').forEach(button=> {
                        button.addEventListener('click', async (event) => {
                        const selectedDate = event.target.getAttribute('data-date');

                        try {
                        const response = await fetch(`/patient-history/${patient_id}`, {
                        method: 'POST',
                        headers: {
                        'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({ date: selectedDate }),
                        });

                        if (!response.ok) throw new Error('Network response was not ok');

                        const patientHistory = await response.json();
                        displayPatientHistory(patientHistory);
                        } catch (error) {
                        console.error('Error fetching patient history:', error);
                        }
                        });
                        });

                        function displayPatientHistory(history) {
                        const infoContainer = document.querySelector('.info-container');
                        infoContainer.innerHTML = ''; // Clear previous information

                        if (history.length === 0) {
                        infoContainer.innerHTML = '<p>No records found for this date.</p>';
                        return;
                        }

                        history.forEach(record => {
                        const recordDiv = document.createElement('div');
                        recordDiv.innerHTML = `
                        <h2>${record.check_date}</h2>
                        <p><strong>Name:</strong> ${record.first_name} ${record.last_name}</p>
                        <p><strong>Lab Results:</strong> ${record.lab_results}</p>
                        <p><strong>Medicines:</strong> ${record.medicines}</p>
                        <p><strong>Instructions:</strong> ${record.instruction}</p>
                        <p><strong>Categories:</strong> ${record.categories}</p>
                        <p><strong>Services:</strong> ${record.services}</p>
                        <hr>
                        `;
                        infoContainer.appendChild(recordDiv);
                        });
                        }
                        </script> -->