<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="shortcut icon" type="image/png" href=""/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../css/global/general.css" />
    <link rel="stylesheet" href="../css/local/beneficiary-records.css" />
    <title>PHARMACY|RECORDS</title>
  </head>
  <body>
    <%- include("../includes/header.ejs")  %>
    <%- include("../includes/pharmacy-sub-head.ejs")  %>
    <main>
      <div class="buttons">
        <div class="search">
          <input type="text" id="searchInput" placeholder="Search..." />
          <img src="../icon/search.svg" alt="" />
        </div>
        <div class="add-transfer">
          <button id="dispense" onclick="popUp_button(this)">DISPENSE</button>
          <button>ADD BENEFICIARY</button>
        </div>
      </div>
      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>NAME</th>
              <th>GENDER</th>
              <th>ADDRESS</th>
              <th>CONTACT NO.</th>
              <th>AGE</th>
              <th>NOTE</th>
              <th>SENIOR CITIZEN</th>
              <th>PWD</th>
            </tr>
          </thead>
          <tbody id="beneficiaryTableBody">
            <div id="loadingSpinner" style="display:none;">Loading...</div>
            <% if (getBeneficiaryList && getBeneficiaryList.length > 0) { %>
              <% getBeneficiaryList.forEach(list => { %>
                <tr>
                  <td><%= list.first_name %> <%= list.middle_name %> <%= list.last_name %></td>
                  <td><%= list.gender %></td>
                  <td><%= list.street %> <%= list.barangay %> <%= list.city %> <%= list.province %></td>
                  <td><%= list.phone %></td>
                  <td><%= list.age %></td>
                  <td><%= list.note %></td>
                  <td><%= list.senior_citizen %></td>
                  <td><%= list.pwd %></td>
                </tr>
             <% }) %>
           <% } else { %> 
            <tr>
              <td colspan="8">No list of beneficiary</td>
            </tr>
            <% } %>
          </tbody>
        </table>
        <div>
          <% if (currentPage > 1) { %>
            <a href="?page=<%= currentPage - 1 %>&limit=<%= limit %>">Previous</a>
          <% } %>
          <% if (currentPage < totalPages) { %>
            <a href="?page=<%= currentPage + 1 %>&limit=<%= limit %>">Next</a>
          <% } %>
        </div>        
      </div>
    </main>
    <div class="pop-up" id="dispense-med">
      <div class="close-container">
        <img src="../icon/close.svg" alt="" class="close_popUp">
      </div>
      <h1 class="heading">DISPENSE MEDICINE</h1>
      <main>
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>TRANSACTION NO.</th>
                <th>PRODUCT NAME</th>
                <th>ISSUED QUANTITY</th>
                <th>ISSUED DATE</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>11111</td>
                <td>Kim Boog</td>
                <td>Guti</td>
                <td>Delay</td>
              </tr>
            </tbody>
          </table>
        </div>
        <form action="" class="dispense-med" method="POST">
          <div>
            <div>
              <div class="input-w8-label">
                <label>Beneficiary Name</label>
                <input type="text" name="beneficiary_name">
              </div>
              <div class="input-w8-label">
                <label>Physician</label>
                <input type="text" name="physician">
              </div>
              <div class="input-w8-label">
                <label>Diagnosis</label>
                <input type="text" name="diagnosis">
              </div>
            </div>
            <div>
              <div class="input-w8-label">
                <label>Requesting Party</label>
                <input type="text" name="requesting_party">
              </div>
              <div class="input-w8-label">
                <label>Affiliation</label>
                <input type="text" name="relationship">
              </div>
            </div>
          </div>
          <div>
            <button type="button" class="button-bordered" id="reject_dispense_button" onclick="popUp_button(this)">REJECT</button>
            <button type="button" class="button-green" id="submit_dispense_button" onclick="popUp_button(this)">SUBMIT</button>
          </div>
          <div class="pop-up-confirm" id="reject_dispense">
            <div>
              <div class="reject-heading">
                <img src="../icon/warning.svg" alt="">
                <h2>Rejecting a dispense request will automatically delete from the list</h2>
              </div>
              <main>
                <h2>Are sure you want to reject this dispense request?</h2>
                <div>
                  <button type="button" class="button-bordered close_confirm">No</button>
                  <button type="submit" class="button-bordered">Yes</button>
                </div>
              </main>
            </div>
          </div>
          <div class="pop-up-confirm" id="submit_dispense">
            <div>
              <h2>Do you want to dispense medicine?</h2>
              <main>
                <button type="button" class="button-bordered close_confirm">No</button>
                <button type="submit" class="button-green">Yes</button>
              </main>
            </div>
          </div>
        </form>
      </main>
    </div>
    <div class="pop-up" id="add-beneficiary" style="display: none !important;">
      <div class="close-container">
        <img src="../icon/close.svg" alt="" class="close_popUp">
      </div>
      <h1 class="heading">ADD BENEFICIARY</h1>
      <main>
        <form action="" class="dispense-med" method="POST">
          <div>
            <div class="row">
              <div class="input-w8-label" id="surubadan">
                <label>Last Name</label>
                <input type="text">
              </div>
              <div class="input-w8-label">
                <label>First Name</label>
                <input type="text">
              </div>
              <div class="input-w8-label">
                <label>Middle Name</label>
                <input type="text">
              </div>
            </div>
            <div class="row">
              <div class="input-w8-label" id="masubad">
                <label>Gender</label>
                <input type="text">
              </div>
              <div class="input-w8-label">
                <label>Birthdate</label>
                <input type="date">
              </div>
              <div class="input-w8-label">
                <label>Processed Date</label>
                <input type="date">
              </div>
            </div>
            <div class="row">
              <div class="input-w8-label">
                <label>Phone No.</label>
                <input type="text">
              </div>
              <div class="input-w8-label">
                <label>Occupation</label>
                <input type="text">
              </div>
              <div class="row1">
                <div class="input-w8-label">
                  <label>Senior</label>
                  <select name="" id="">
                    <option value="">Yes</option>
                    <option value="">No</option>
                  </select>
                </div>
                <div class="input-w8-label">
                  <label>PWD</label>
                  <select name="" id="">
                    <option value="">Yes</option>
                    <option value="">No</option>
                  </select>
                </div>
              </div>
            </div>
            <div class="row">
              <label>Address</label>
              <div>
                <input type="text" placeholder="Street">
                <input type="text" placeholder="Barangay">
                <input type="text" placeholder="City">
                <input type="text" placeholder="Province">
              </div>
            </div>
            <div class="row">
              <div class="input-w8-label">
                <label for="">Note</label>
                <textarea name="" id="" cols="30" rows="10"></textarea>
              </div>
              <div class="input-w8-label">
                <label for="">Select an image</label>
                  <input type="file">
              </div>
            </div>
          </div>
            <button type="button" class="button-green" id="submit_dispense_button" onclick="popUp_button(this)">SUBMIT</button>
          <div class="pop-up-confirm" id="reject_dispense">
            <div>
              <div class="reject-heading">
                <img src="../icon/warning.svg" alt="">
                <h2>Rejecting a dispense request will automatically delete from the list</h2>
              </div>
              <main>
                <h2>Are sure you want to reject this dispense request?</h2>
                <div>
                  <button type="button" class="button-bordered close_confirm">No</button>
                  <button type="submit" class="button-bordered">Yes</button>
                </div>
              </main>
            </div>
          </div>
          <div class="pop-up-confirm" id="submit_dispense">
            <div>
              <h2>Do you want to dispense medicine?</h2>
              <main>
                <button type="button" class="button-bordered close_confirm">No</button>
                <button type="submit" class="button-green">Yes</button>
              </main>
            </div>
          </div>
        </form>
      </main>
    </div>
    <script src="../../js/local/beneficiary/beneficiary-api.js"></script>
    <script src="../../js/global/pop-up.js"></script>
    <script>
      const container = document.getElementById("surubadan");
      const masubad = document.getElementById("masubad");
      const containerWidth = parseFloat(window.getComputedStyle(container).width);
      const newWidth = containerWidth - 107.33;
      masubad.style.width = newWidth + "px";
    </script>
  </body>
</html>
